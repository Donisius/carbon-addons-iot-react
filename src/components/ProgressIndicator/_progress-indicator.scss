@import '~carbon-components/scss/components/progress-indicator/progress-indicator';
@import '../../globals/vars';

.#{$iot-prefix}--progress-indicator {
  display: flex;
  overflow: hidden;

  .#{$iot-prefix}--progress-step {
    svg text {
      font-size: 18px;
    }

    .#{$iot-prefix}--progress-text {
      position: absolute;
      left: 0px;
      top: $spacing-07;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      width: inherit;
      height: 100%;
      display: block;

      &-label {
        @include type-style('body-short-01');
        position: relative;
        color: $text-01;
        cursor: default;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        width: max-content;

        &--optional {
          @extend .#{$iot-prefix}--progress-text-label;
          font-size: $spacing-04;
          color: $icon-02;
          letter-spacing: 0.32px;
          line-height: $spacing-05;
          cursor: default !important;
          margin-top: $spacing-01;
        }

        transition: box-shadow $duration--fast-02 motion(standard, productive),
          color $duration--fast-02 motion(standard, productive);
      }

      &--hidden {
        visibility: hidden;
      }
    }

    &-line {
      position: absolute;
      width: calc(100% - 24px);
      height: 2px;
      background-color: $ui-03;
      top: 11px;
      left: 24px;

      &--complete {
        @extend .line;
        background-color: $interactive-01;
      }

      &--sub {
        @extend .line;
        left: 16px;
        width: calc(100% - 16px);

        &-complete {
          @extend .line-sub;
          background-color: $interactive-03;
        }
      }
    }

    &-button {
      display: flex;
      position: relative;
      text-align: left;
      width: 8rem;
      height: 68px;
      padding: 0px;
      margin: 0px;

      background-color: Transparent;
      background-repeat: no-repeat;
      cursor: default;
      overflow: hidden;
      text-overflow: ellipsis;
      outline: none;
      border: none;

      &--clickable {
        .#{$iot-prefix}--progress-text-label {
          cursor: pointer;
        }
      }

      &:focus {
        box-shadow: inset 0 0 0 2px $focus;
      }

      &:hover {
        .#{$iot-prefix}--progress-text-label:not(.#{$iot-prefix}--progress-text-label-optional) {
          box-shadow: 0px rem(1px) $link-01;
        }
      }

      &:active {
        .#{$iot-prefix}--progress-text-label:not(.#{$iot-prefix}--progress-text-label-optional) {
          box-shadow: 0px rem(3px) 0px 0px $interactive-01;
        }
      }
    }

    &-sub {
      .#{$iot-prefix}--progress-step-icon {
        margin-top: $spacing-02;
        margin-left: 0px;
      }
    }

    &--current {
      &:not(.#{$iot-prefix}--progress-step--invalid) {
        .#{$iot-prefix}--progress-step-button--main-step {
          fill: $interactive-01;

          text {
            fill: $text-04;
          }
        }

        .#{$iot-prefix}--progress-step-button--sub-step {
          svg {
            fill: $interactive-03;
          }
        }
      }
    }

    &--complete {
      svg {
        fill: $interactive-01;
      }
    }

    &--incomplete {
      .#{$iot-prefix}--progress-step-button--main-step {
        fill: $text-01;
      }

      .#{$iot-prefix}--progress-step-button--sub-step {
        svg {
          color: $text-01;
        }
      }
    }

    &--disabled {
      &:not(.#{$iot-prefix}--progress-step--invalid) {
        .#{$iot-prefix}--progress-step-button--main-step {
          fill: $disabled-02;
        }

        .#{$iot-prefix}--progress-step-button--sub-step {
          svg {
            fill: $disabled-02;
          }
        }
      }

      &.#{$iot-prefix}--progress-step--invalid {
        svg {
          fill: $disabled-02;
        }
      }

      .#{$iot-prefix}--progress-text-label {
        @extend .label;
        color: $disabled-02;
        cursor: default !important;
        box-shadow: none !important;
      }
    }

    &--invalid {
      svg {
        fill: $text-error;
      }
    }
  }

  html[dir='rtl'] & {
    float: right;
    text-align: right;
    width: 100%;

    .step-button {
      text-align: right;
    }

    .#{$iot-prefix}--progress-step-icon {
      left: unset;
      right: 0px;
      text-align: right;
    }

    .label-container {
      right: 0px;
      text-align: right;
    }

    .line {
      left: 0px;
      right: 24px;
      text-align: right;

      &-sub {
        left: 0px;
        right: 16px;
      }
    }
  }

  &.#{$iot-prefix}--progress-indicator--vertical {
    display: unset;

    .label-container {
      left: $spacing-07;
      top: 3px;
    }

    .step-button {
      width: 100%;
      height: 76px;
    }

    .sub-step .label-container {
      top: 0px;
    }

    .sub-step .#{$iot-prefix}--progress-step-icon {
      margin-top: 0px;
      margin-left: $spacing-02;
      margin-right: $spacing-02;
    }

    .line {
      width: $spacing-01;
      height: calc(100% - 24px);
      top: $layout-02;
      left: 11px;

      &-sub {
        top: $spacing-05;
        height: calc(100% - 16px);
      }
    }

    html[dir='rtl'] & {
      float: right;
      text-align: right;
      width: 100%;

      .step-button {
        text-align: right;
      }

      .label-container {
        right: $spacing-07;
        text-align: right;
      }

      .line {
        left: unset;
        right: 11px;
        text-align: right;
      }

      .#{$prefix}--skeleton {
        .#{$prefix}--progress-step--incomplete svg {
          margin-right: 0px;
          margin-left: $spacing-03;
        }
      }
    }
  }

  .#{$prefix}--skeleton {
    .#{$prefix}--progress-step {
      flex: unset;
    }
  }
}
