@import '~carbon-components/scss/globals/scss/vars';

.#{$iot-prefix}--map {
  &-legend {
    max-width: 50%;
    background: $ui-02;
    bottom: 1rem;
    left: 1rem;
    padding: 1rem;
    position: absolute;
    z-index: 2;
    opacity: 0.8;
    @include box-shadow();

    [dir='rtl'] & {
      left: unset;
      right: 1rem;
    }
  }

  &-legend--increased-margin {
    bottom: 2rem;
    left: 2rem;

    [dir='rtl'] & {
      left: unset;
      right: 2rem;
    }
  }

  &-legend__fullwidth {
    // We want the same height independent if scrollbars are present and
    // we need space for the logo and attribution links.
    height: 6.5rem;
    transition: width $duration--fast-02 motion(entrance, productive);
    max-width: unset;
    bottom: 0;
    display: flex;
    left: 0;
    right: 0;
    width: 100%;
    padding: $spacing-03;
    padding-bottom: $spacing-02; // Needed for horizontal scrollbar

    .#{$iot-prefix}--map-legend-keys-container {
      overflow-x: auto;
      .#{$iot-prefix}--map-legend-keys {
        margin-bottom: 0;
      }

      & > .#{$iot-prefix}--map-legend-keys:not(:last-child) {
        margin-right: 0.5rem;
      }
    }

    [dir='rtl'] & {
      right: 0;
    }
  }

  &-legend__fullwidth--collapsed {
    width: $spacing-09;
  }

  [dir='rtl']
    &-legend.#{$iot-prefix}--map-legend__fullwidth
    .#{$iot-prefix}--map-legend-keys-container
    > .#{$iot-prefix}--map-legend-keys:not(:last-child) {
    margin-left: 0.5rem;
    margin-right: unset;
  }

  [dir='rtl'] &-legend__collapse-btn {
    margin-left: $spacing-02;
    margin-right: 0;
  }

  &-legend__collapse-btn {
    margin-right: $spacing-02;
    margin-bottom: $spacing-08;
  }

  &-legend__label {
    @include type-style('productive-heading-01');
    padding-bottom: $spacing-03;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  &-legend-content {
    display: flex;
    flex-direction: column;
    width: calc(100% - #{$spacing-09});
  }

  &-legend__fullwidth--collapsed .#{$iot-prefix}--map-legend-keys-container {
    overflow-x: hidden;
  }

  &-legend-keys-container {
    display: flex;
    padding-bottom: $spacing-02;
  }

  &-legend-keys {
    display: flex;
    margin-bottom: $spacing-04;
  }

  &-legend-keys-color {
    height: 1rem;
    margin-right: 0.5rem;
    width: 1rem;
    flex-shrink: 0;

    [dir='rtl'] & {
      margin-left: 0.5rem;
      margin-right: unset;
    }
  }

  &-legend-keys-value {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
}
